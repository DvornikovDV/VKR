# –ê–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (dev/save_load)

**–í–µ—Ä—Å–∏—è**: 1.0  
**–î–∞—Ç–∞**: 04.02.2026  
**–í–µ—Ç–∫–∞**: dev/save_load  
**–°—Ç–∞—Ç—É—Å**: –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π  

---

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 1. XSS —á–µ—Ä–µ–∑ Base64 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
**–§–∞–π–ª**: `public/file-manager.js`  
**–ú–µ—Ç–æ–¥—ã**: `imageToBase64()`, `importImages()`  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö Base64, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å XSS —á–µ—Ä–µ–∑ –ø–æ–¥–¥–µ–ª–∞–Ω–Ω—ã–µ JSON  
**–†–∏—Å–∫**: –í—ã—Å–æ–∫–∏–π  
**–ò—Å–ø—Ä–∞–≤–∏—Ç—å**: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É MIME type –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π

### 2. JSON Injection
**–§–∞–π–ª**: `public/file-manager.js`  
**–ú–µ—Ç–æ–¥—ã**: `loadScheme()`, `loadBindings()`  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä—è–º–æ–π `JSON.parse()` –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, prototype pollution  
**–†–∏—Å–∫**: –°—Ä–µ–¥–Ω–∏–π  
**–ò—Å–ø—Ä–∞–≤–∏—Ç—å**: –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ whitelist –ø–æ–ª–µ–π, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

### 3. Path Traversal –≤ –∏–º–µ–Ω–∞—Ö —Ñ–∞–π–ª–æ–≤
**–§–∞–π–ª**: `public/file-manager.js`  
**–ú–µ—Ç–æ–¥**: `pickSchemeName()`  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏ –∏–º–µ–Ω–∏, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å `../../etc/passwd`  
**–†–∏—Å–∫**: –°—Ä–µ–¥–Ω–∏–π  
**–ò—Å–ø—Ä–∞–≤–∏—Ç—å**: –£–¥–∞–ª–µ–Ω–∏–µ –ø—É—Ç–µ–π –∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞

### 4. –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ callbacks
**–§–∞–π–ª**: `public/widget-manager.js`  
**–ú–µ—Ç–æ–¥**: `attachDragHandlers()`  
**–ü—Ä–æ–±–ª–µ–º–∞**: `window.onWidgetSelected` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω –∏–∑–≤–Ω–µ  
**–†–∏—Å–∫**: –°—Ä–µ–¥–Ω–∏–π  
**–ò—Å–ø—Ä–∞–≤–∏—Ç—å**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º

---

## –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 5. Memory Leak –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
**–§–∞–π–ª**: `public/file-manager.js`  
**–ú–µ—Ç–æ–¥**: `importImages()`  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç `onerror` –∏ timeout –¥–ª—è Promise, —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö  
**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ**: –ó–∞–≤–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö  
**–ò—Å–ø—Ä–∞–≤–∏—Ç—å**: –î–æ–±–∞–≤–∏—Ç—å timeout –∏ error handler

### 6. –î–≤–æ–π–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç—å
**–§–∞–π–ª**: `public/file-manager.js`  
**–ú–µ—Ç–æ–¥**: `downloadJSON()`  
**–ü—Ä–æ–±–ª–µ–º–∞**: Blob —Å–æ–∑–¥–∞—ë—Ç—Å—è, –∑–∞—Ç–µ–º —Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ FileReader (–∏–∑–±—ã—Ç–æ—á–Ω–æ)  
**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ**: –ó–∞–≤–∏—Å–∞–Ω–∏—è –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö —Å—Ö–µ–º–∞—Ö (>10MB)  
**–ò—Å–ø—Ä–∞–≤–∏—Ç—å**: –£–ø—Ä–æ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É, –ø—Ä—è–º–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ URL –±–µ–∑ FileReader

### 7. O(n√ó9) –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ –≤–∏–¥–∂–µ—Ç–æ–≤
**–§–∞–π–ª**: `public/widget-manager.js`  
**–ú–µ—Ç–æ–¥**: `exportWidgets()`  
**–ü—Ä–æ–±–ª–µ–º–∞**: 9 if-else –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ –∫–∞–∂–¥—ã–π –≤–∏–¥–∂–µ—Ç –≤–º–µ—Å—Ç–æ lookup table  
**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ**: –ú–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ >100 –≤–∏–¥–∂–µ—Ç–∞—Ö  
**–ò—Å–ø—Ä–∞–≤–∏—Ç—å**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Map –¥–ª—è —Ç–∏–ø–æ–≤ –≤–∏–¥–∂–µ—Ç–æ–≤

### 8. –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ batchDraw() –≤—ã–∑–æ–≤—ã
**–§–∞–π–ª**: `public/widget-manager.js`  
**–ú–µ—Ç–æ–¥**: `updatePosition()`  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ canvas –Ω–∞ –∫–∞–∂–¥–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏  
**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ**: –õ–∞–≥–∏ –ø—Ä–∏ –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö  
**–ò—Å–ø—Ä–∞–≤–∏—Ç—å**: Batch updates, –æ–¥–∏–Ω batchDraw() –ø–æ—Å–ª–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 9. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ debounce –¥–ª—è drag
**–§–∞–π–ª**: `public/widget-manager.js`  
**–ú–µ—Ç–æ–¥**: `dragmoveHandler()`  
**–ü—Ä–æ–±–ª–µ–º–∞**: –í—ã—á–∏—Å–ª–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü –∏ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –Ω–∞ –∫–∞–∂–¥—ã–π mousemove event  
**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ**: –õ–∞–≥–∏ –ø—Ä–∏ –¥—Ä–∞–≥–µ –Ω–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö  
**–ò—Å–ø—Ä–∞–≤–∏—Ç—å**: Throttle/debounce –¥–ª—è drag –æ–ø–µ—Ä–∞—Ü–∏–π

---

## –ü—Ä–æ–±–ª–µ–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 10. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
**–§–∞–π–ª—ã**: `public/file-manager.js`, `public/widget-manager.js`, `public/bindings-manager.js`  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤, –ø—Ä—è–º–æ–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –∏–∑ JSON  
**–ò—Å–ø—Ä–∞–≤–∏—Ç—å**: –î–æ–±–∞–≤–∏—Ç—å JSON Schema –≤–∞–ª–∏–¥–∞—Ü–∏—é

### 11. –•—Ä—É–ø–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
**–§–∞–π–ª**: `public/file-manager.js`  
**–ú–µ—Ç–æ–¥—ã**: –≤—Å–µ catch –±–ª–æ–∫–∏  
**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –Ω–µ—Ç error recovery  
**–ò—Å–ø—Ä–∞–≤–∏—Ç—å**: User-friendly —Å–æ–æ–±—â–µ–Ω–∏—è, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫

### 12. Race Condition –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
**–§–∞–π–ª**: `public/file-manager.js`  
**–ú–µ—Ç–æ–¥—ã**: `loadScheme()`, `loadBindings()`  
**–ü—Ä–æ–±–ª–µ–º–∞**: –í–æ–∑–º–æ–∂–Ω–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤  
**–ò—Å–ø—Ä–∞–≤–∏—Ç—å**: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ UI –≤–æ –≤—Ä–µ–º—è –æ–ø–µ—Ä–∞—Ü–∏–π, —Ñ–ª–∞–≥ loading state

### 13. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–∏–º–∏—Ç–æ–≤ —Ä–∞–∑–º–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
**–§–∞–π–ª—ã**: `public/file-manager.js`, `public/widget-manager.js`  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤  
**–†–∏—Å–∫**: DoS —á–µ—Ä–µ–∑ –æ–≥—Ä–æ–º–Ω—ã–µ JSON —Ñ–∞–π–ª—ã  
**–ò—Å–ø—Ä–∞–≤–∏—Ç—å**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (<50MB) –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (<1000)

### 14. –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–≤—è–∑–æ–∫
**–§–∞–π–ª**: `public/bindings-manager.js`  
**–ú–µ—Ç–æ–¥**: `assignDeviceToElement()`  
**–ü—Ä–æ–±–ª–µ–º–∞**: –î—É–±–ª–∏–∫–∞—Ç—ã –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è, –Ω–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å widgetManager  
**–ò—Å–ø—Ä–∞–≤–∏—Ç—å**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

---

## –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û—Ü–µ–Ω–∫–∞ | –°—Ç–∞—Ç—É—Å |
|-----------|--------|--------|
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | 4/10 | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | 6/10 | üü° –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è |
| –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å | 5/10 | üü° –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è |
| –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ | 7/10 | üü¢ –ü—Ä–∏–µ–º–ª–µ–º–æ |

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –í—ã—Å–æ–∫–∏–π (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)
1. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–ø—É–Ω–∫—Ç 1)
2. –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∏–º—ë–Ω —Ñ–∞–π–ª–æ–≤ (–ø—É–Ω–∫—Ç 3)
3. Timeout/error handler –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–ø—É–Ω–∫—Ç 5)
4. JSON whitelist –≤–∞–ª–∏–¥–∞—Ü–∏—è (–ø—É–Ω–∫—Ç 2)

### –°—Ä–µ–¥–Ω–∏–π (—Å–ª–µ–¥—É—é—â–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è)
5. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ exportWidgets() (–ø—É–Ω–∫—Ç 7)
6. Debounce –¥–ª—è drag (–ø—É–Ω–∫—Ç 9)
7. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤ (–ø—É–Ω–∫—Ç 13)
8. –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ (–ø—É–Ω–∫—Ç 11)

### –ù–∏–∑–∫–∏–π (—Ç–µ—Ö–¥–æ–ª–≥)
9. JSON Schema –≤–∞–ª–∏–¥–∞—Ü–∏—è (–ø—É–Ω–∫—Ç 10)
10. Streaming –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ (–ø—É–Ω–∫—Ç 6)
11. Race conditions –∑–∞—â–∏—Ç–∞ (–ø—É–Ω–∫—Ç 12)
12. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö callbacks (–ø—É–Ω–∫—Ç 4)

---

**–í—ã–≤–æ–¥**: –ö–æ–¥ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω, –Ω–æ –∏–º–µ–µ—Ç —Å–µ—Ä—å—ë–∑–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –ø–µ—Ä–µ–¥ production.
