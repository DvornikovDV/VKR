# Iteration 2: –í–∏–¥–∂–µ—Ç—ã (–§–∞–∑–∞ 1 - Display)

**–ü–µ—Ä–∏–æ–¥**: 2 –¥–Ω—è  
**–°—Ç–∞—Ç—É—Å**: Planning  
**–í–µ—Ç–∫–∞**: `feature/widgets-phase2-selection`  
**–§–æ–∫—É—Å**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Display –≤–∏–¥–∂–µ—Ç–æ–≤ (LED, Number Display, Text Display)  

---

## –¶–µ–ª—å

–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∏ Display –≤–∏–¥–∂–µ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã SelectionManager –∏ PropertiesPanel.

---

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (in public/)
‚úÖ `selection-manager.js` (4.3 KB) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤  
‚úÖ `properties-panel.js` (4.6 KB) - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤  
‚úÖ `ui-controller.js` (14 KB) - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤  

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å
üîÑ –†–∞—Å—à–∏—Ä–∏—Ç—å `widget-manager.js` (–µ—Å–ª–∏ —Å–æ–∑–¥–∞–Ω) –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π  
üîÑ –†–∞—Å—à–∏—Ä–∏—Ç—å `properties-panel.js` (–¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤)  
üîÑ –†–∞—Å—à–∏—Ä–∏—Ç—å `ui-controller.js` (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–æ–≤)  

---

## –ó–∞–¥–∞—á–∏

### –î–µ–Ω—å 1: –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- [ ] **Task 1.1**: –ò–∑—É—á–∏—Ç—å SelectionManager
  - –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
  - –ö–∞–∫ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è PropertiesPanel
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UIController
  - –§–∞–π–ª: `public/selection-manager.js`

- [ ] **Task 1.2**: –ò–∑—É—á–∏—Ç—å PropertiesPanel
  - –ö–∞–∫ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å–≤–æ–π—Å—Ç–≤–∞
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTML
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏
  - –§–∞–π–ª: `public/properties-panel.js`

- [ ] **Task 1.3**: –°–æ–∑–¥–∞—Ç—å WidgetManager (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
  - –ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞–º–∏
  - –ú–µ—Ç–æ–¥—ã: createWidget(), updateWidget(), deleteWidget()
  - –§–∞–π–ª: `public/widget-manager.js` (–Ω–æ–≤—ã–π –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å)

- [ ] **Task 1.4**: –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–π LED –≤–∏–¥–∂–µ—Ç
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞: Konva.Circle + Konva.Text
  - –°–≤–æ–π—Å—Ç–≤–∞: id, position, size, color, state
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SelectionManager
  - –§–∞–π–ª: `public/widget-manager.js`

**–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–Ω—è 1**: LED –≤–∏–¥–∂–µ—Ç –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∏ –≤—ã–±—Ä–∞—Ç—å –Ω–∞ —Ö–æ–ª—Å—Ç–µ

### –î–µ–Ω—å 2: –ü–æ–ª–Ω–æ—Ç–∞ (Number Display + Text Display)

- [ ] **Task 2.1**: –î–æ–±–∞–≤–∏—Ç—å Number Display –≤–∏–¥–∂–µ—Ç
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞: Konva.Rect + Konva.Text
  - –°–≤–æ–π—Å—Ç–≤–∞: id, position, size, value, decimal places
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ PropertiesPanel
  - –§–∞–π–ª: `public/widget-manager.js`

- [ ] **Task 2.2**: –î–æ–±–∞–≤–∏—Ç—å Text Display –≤–∏–¥–∂–µ—Ç
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞: Konva.Rect + Konva.Text
  - –°–≤–æ–π—Å—Ç–≤–∞: id, position, size, text content, font size
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ PropertiesPanel
  - –§–∞–π–ª: `public/widget-manager.js`

- [ ] **Task 2.3**: –†–∞—Å—à–∏—Ä–∏—Ç—å PropertiesPanel
  - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ –≤–∏–¥–∂–µ—Ç–æ–≤
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ (color, size, value, text)
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ö–æ–ª—Å—Ç–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
  - –§–∞–π–ª: `public/properties-panel.js`

- [ ] **Task 2.4**: –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - –°–æ–∑–¥–∞—Ç—å 3 —Ä–∞–∑–Ω—ã—Ö –≤–∏–¥–∂–µ—Ç–∞ (LED, Number, Text)
  - –í—ã–±—Ä–∞—Ç—å –∫–∞–∂–¥—ã–π ‚Üí —Å–≤–æ–π—Å—Ç–≤–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
  - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ ‚Üí –≤–∏–¥–∂–µ—Ç –æ–±–Ω–æ–≤–∏–ª—Å—è –Ω–∞ —Ö–æ–ª—Å—Ç–µ
  - –£–¥–∞–ª–∏—Ç—å –≤–∏–¥–∂–µ—Ç (–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é)
  - –ù–µ—Ç –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫
  - –§–∞–π–ª—ã: –≤—Å–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–Ω—è 2**: –í—Å–µ 3 Display –≤–∏–¥–∂–µ—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é

---

## –§–∞–π–ª—ã

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫-–µ—Å—Ç—å)
- ‚úÖ `public/selection-manager.js` - –≤—ã–¥–µ–ª–µ–Ω–∏–µ
- ‚úÖ `public/properties-panel.js` - –ø–∞–Ω–µ–ª—å —Å–≤–æ–π—Å—Ç–≤
- ‚úÖ `public/ui-controller.js` - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä
- ‚úÖ `public/canvas-manager.js` - Konva.js

### –ù–æ–≤—ã–µ / –û–±–Ω–æ–≤–ª—è–µ–º—ã–µ
- üîÑ `public/widget-manager.js` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞–º–∏
  - –ï—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª–∞—Å—Å
  - –ï—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: —Ä–∞—Å—à–∏—Ä–∏—Ç—å –º–µ—Ç–æ–¥—ã
  - –†–∞–∑–º–µ—Ä: ~300-400 —Å—Ç—Ä–æ–∫

- üîÑ `public/properties-panel.js` - —Ä–∞—Å—à–∏—Ä–∏—Ç—å
  - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–∫–∞–∑–∞ —Å–≤–æ–π—Å—Ç–≤ –≤–∏–¥–∂–µ—Ç–æ–≤
  - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  - –†–∞–∑–º–µ—Ä: +150-200 —Å—Ç—Ä–æ–∫

- üîÑ `public/ui-controller.js` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å WidgetManager
  - –ü–µ—Ä–µ–¥–∞—Ç—å —Å—Å—ã–ª–∫–∏ –º–µ–∂–¥—É –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏
  - –†–∞–∑–º–µ—Ä: +50-100 —Å—Ç—Ä–æ–∫

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–∏–¥–∂–µ—Ç–æ–≤

### LED Widget
```javascript
{
  id: "led-1",
  type: "led",
  x: 100,
  y: 150,
  size: 30,
  color: "#ff0000",    // –∫—Ä–∞—Å–Ω—ã–π
  state: true,         // ON/OFF
  konvaGroup: Konva.Group
}
```

### Number Display Widget
```javascript
{
  id: "number-1",
  type: "number-display",
  x: 200,
  y: 150,
  width: 100,
  height: 40,
  value: 42.50,
  decimalPlaces: 2,
  fontSize: 16,
  konvaGroup: Konva.Group
}
```

### Text Display Widget
```javascript
{
  id: "text-1",
  type: "text-display",
  x: 300,
  y: 150,
  width: 150,
  height: 30,
  text: "–°–æ—Å—Ç–æ—è–Ω–∏–µ: OK",
  fontSize: 14,
  konvaGroup: Konva.Group
}
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ü–æ—Ç–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  ‚Üì
"–î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–∂–µ—Ç" ‚Üí –≤—ã–±—Ä–∞—Ç—å —Ç–∏–ø (LED / Number / Text)
  ‚Üì
WidgetManager.createWidget(type)
  ‚Üì
–°–æ–∑–¥–∞—Ç—å Konva.Group —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
  ‚Üì
–ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ SlectionManager (clickable)
  ‚Üì
–ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ PropertiesPanel (–ø–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞)
  ‚Üì
WidgetManager.onWidgetCreated()
```

### –ü–æ—Ç–æ–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –∫–ª–∏–∫–Ω—É–ª –Ω–∞ –≤–∏–¥–∂–µ—Ç
  ‚Üì
SelectionManager.selectElement(widget)
  ‚Üì
PropertiesPanel.showPropertiesForWidget(widget)
  ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –∏–∑–º–µ–Ω–∏–ª —Å–≤–æ–π—Å—Ç–≤–æ (color, value, text)
  ‚Üì
PropertiesPanel.updateWidget(widgetId, property, value)
  ‚Üì
WidgetManager.updateWidget(widgetId, property, value)
  ‚Üì
–ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å –≤–∏–¥–∂–µ—Ç –Ω–∞ —Ö–æ–ª—Å—Ç–µ
```

---

## –ì–æ—Ç–æ–≤–æ –∫–æ–≥–¥–∞

‚úÖ LED –≤–∏–¥–∂–µ—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è  
‚úÖ Number Display –≤–∏–¥–∂–µ—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è  
‚úÖ Text Display –≤–∏–¥–∂–µ—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è  
‚úÖ PropertiesPanel –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–∞ –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞  
‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤–∏–¥–∂–µ—Ç –Ω–∞ —Ö–æ–ª—Å—Ç–µ  
‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –ù–µ—Ç –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫  
‚úÖ –í—Å–µ 3 —Ç–∏–ø–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç—Å—è  

---

## –°—Å—ã–ª–∫–∏

- **–¢–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞**: `feature/widgets-phase2-selection`
- **Guide**: `doc/widgets-dev-guide.md` (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –¥–∏–∑–∞–π–Ω)
- **Implementation**: `doc/widgets-implementation-plan.md` (–æ–±—â–∏–π –ø–ª–∞–Ω)
- **Iteration 1**: ‚úÖ `feature/widgets-phase1-display` (—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã)
- **FILE_MAP**: `FILE_MAP.md` (–∫–∞—Ä—Ç–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤)

---

## –ó–∞–º–µ—á–∞–Ω–∏—è

1. **SelectionManager –∏ PropertiesPanel —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç** - –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–Ω–æ–≤–æ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –µ—Å—Ç—å
2. **WidgetManager –º–æ–∂–µ—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º (–≤–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å)
3. **–ö–æ–¥ –≤ public/** - —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–∫–æ–¥, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
4. **–ö–æ–Ω–≤–µ–Ω—Ü–∏–∏**: —Å–º–æ—Ç—Ä–µ—Ç—å `doc/conventions.md` –¥–ª—è –ø—Ä–∞–≤–∏–ª –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
5. **–§–æ–∫—É—Å**: Display –≤–∏–¥–∂–µ—Ç—ã - —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö, –±–µ–∑ Input (—ç—Ç–æ –±—É–¥–µ—Ç –≤ Iteration 3)
